#
# MongoDB Dockerfile
# MongoDB version 3.5
#
# https://github.com/suzhugen/mongo
#

# Pull base image.
FROM debian:jessie-slim

# Install MongoDB.

RUN apt-get update \
	&& apt-get install -y --no-install-recommends \
		ca-certificates \
		jq \
		numactl \
	&& rm -rf /var/lib/apt/lists/* \
    && apt-get install apt-transport-https

RUN echo "deb  https://repo.mongodb.org/apt/debian jessie//mongodb-org/3.6 main" |  tee /etc/apt/sources.list.d/mongodb-org-3.6.list

RUN \
  apt-get update  \
  && apt-get install -y mongodb-org \
  && rm -rf /var/lib/apt/lists/*

# Define mountable directories.
VOLUME ["/data/db"]


# Define working directory.
WORKDIR /data

COPY mongod-all-ips.conf  /etc/mongod.conf

# Define default command.
CMD ["mongod","--auth"]

# Expose ports.
#   - 27017: process
#   - 28017: http
EXPOSE 27017

